<html>
  <style>
    .s {
      color: rgb(118, 184, 161)
    }
    .t {
      color: rgb(130, 0, 22)
    }
    .u {
      color: rgb(192, 91, 23)
    }
    .button {
      background-color: bisque;
      border-radius: 12px;
      border-style: solid;
      border-width: 5px;
      padding: 15px;
      font-size: 36;
    }
    .button:hover {
      border-color: grey;
    }
    .button:active {
      background-color: chocolate
    }
  </style>

<script>
const voice = window.speechSynthesis.getVoices().find(x => x.name === 'Google US English')

const theaters = [{
  "one": { url: "https://cdn.pixabay.com/photo/2015/04/04/19/13/one-706897_1280.jpg" },
  "two": { url: "https://cdn.pixabay.com/photo/2012/05/04/10/18/two-47085_1280.png" },
  "three": { url: "https://c8.alamy.com/comp/FE0XKN/the-number-three-as-a-polished-golden-object-FE0XKN.jpg" },
  "four": { url: "https://cdn.pixabay.com/photo/2015/04/04/19/13/four-706894_1280.jpg" },
  "five": { url: "https://cdn.pixabay.com/photo/2015/04/04/19/13/five-706893_960_720.jpg" },
  "six": { url: "https://cdn.pixabay.com/photo/2015/04/04/19/13/six-706892_1280.jpg" },
  "seven": { url: "https://cdn.pixabay.com/photo/2015/04/04/19/13/seven-706891_960_720.jpg" },
  "eight": { url: "https://cdn.pixabay.com/photo/2015/04/04/19/13/eight-706890_1280.jpg" },
  "nine": { url: "https://cdn.pixabay.com/photo/2015/04/04/19/13/nine-706889_960_720.jpg" },
  "ten": { url: "https://static.vecteezy.com/system/resources/previews/008/489/743/original/number-ten-10-red-number-png.png" }},
  {
  "bed": { url: "https://media.istockphoto.com/id/1149521461/vector/wooden-bed-with-pillow.jpg?s=612x612&w=0&k=20&c=9fu6sv92j5_7YY9UEyVChCDOojnbJnTjv-wXyKeGt5Q=" },
  "balloon": { url: "https://media.istockphoto.com/id/1281511645/vector/bunch-of-inflatable-balloons-in-cartoon-style-isolated-on-white-background-vector.jpg?s=612x612&w=0&k=20&c=VngxtS7KHH_VhF2HCaPc3BiBAs9izXXtX-5SI6UpRpo=" },
  "doctor": { url: "https://static.vecteezy.com/system/resources/previews/002/896/807/non_2x/female-doctor-using-her-digital-tablet-free-vector.jpg" },
  "fall off": { url: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSCZN4uXCgkJxbV8DQslDz-wf5yZV6kw5qiXlDQCpW7DsQH_dlhx8ugFFG8I5oBms9wg2g&usqp=CAU" },
  "green": { url: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAACoCAMAAABt9SM9AAAAA1BMVEVl/wB6QsljAAAAR0lEQVR4nO3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAO8GxYgAAb0jQ/cAAAAASUVORK5CYII=" },
  "jump": { url: "https://images.unsplash.com/photo-1613122707153-070406e9fd27?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MjB8fGp1bXB8ZW58MHx8MHx8fDA%3D" },
  "listen": { url: "https://images.twinkl.co.uk/tw1n/image/private/t_630/u/ux/active-listening-wiki_ver_1.png" },
  "monkey": { url: "https://pics.craiyon.com/2023-06-16/f99a664cc9354f73bc019707f658316c.webp" },
  "mother": { url: "https://cdn2.vectorstock.com/i/1000x1000/70/61/dark-skinned-mother-and-baby-vector-23827061.jpg" },
  "quiet": { url: "https://www.teachingchannel.com/wp-content/uploads/2023/05/ways-to-quiet-classroom.jpg" }
  },
  {
  "black": { url: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4vD_hTkOqVLh4SMnHxvCc9DkqL1_zY-uuzWVHNoh2Ck7egAE9Hx7D-GvKr5q2C4t-R8g&usqp=CAU" },
  "blue": { url: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQMAAADCCAMAAAB6zFdcAAAAA1BMVEUAAP+KeNJXAAAASElEQVR4nO3BMQEAAADCoPVPbQwfoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIC3AcUIAAFkqh/QAAAAAElFTkSuQmCC" },
  "brown": { url: "https://img.freepik.com/free-photo/brown-concrete-wall-with-scratches-vector_53876-143109.jpg?size=626&ext=jpg" },
  "orange": { url: "https://t4.ftcdn.net/jpg/05/06/41/89/360_F_506418953_5R5MQsN4UJ4hLgqnKlltS44wbQ33LhIU.jpg" },
  "pink": { url: "https://htmlcolorcodes.com/assets/images/colors/pastel-pink-color-solid-background-1920x1080.png" },
  "purple": { url: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/51/Purple_website.svg/1200px-Purple_website.svg.png" },
  "red": { url: "" },
  "white": { url: "" },
  "yellow": { url: "" },
  },
  {
  "sit down": { url: "" },
  "stand up": { url: "" },
  "baby": { url: "" },
  "ball": { url: "" },
  "boy": { url: "" },
  "brother": { url: "" },
  "door": { url: "" },
  "family": { url: "" },
  "father": { url: "" },
  "friend": { url: "" },
  "girl": { url: "" },
  "happy": { url: "" },
  "help": { url: "" },
  "house": { url: "" },
  "in": { url: "" },
  "left": { url: "" },
  "near": { url: "" },
  "on": { url: "" },
  "play": { url: "" },
  "right": { url: "" },
  "roof": { url: "" },
  "sad": { url: "" },
  "sister": { url: "" },
  "stop": { url: "" },
  "tree": { url: "" },
  "under": { url: "" },
  "window": { url: "" },
  "yard": { url: "" },
  "yes": { url: "" },
  "no": { url: "" },
  "afraid": { url: "" },
  "alligator": { url: "" },
  "ant": { url: "" },
  "apple": { url: "" },
  "as": { url: "" },
  "ask": { url: "" },
  "bag": { url: "" },
  "banana": { url: "" },
  "bat": { url: "" },
  "best": { url: "" },
  "big": { url: "" },
  "book": { url: "" },
  "bus": { url: "" },
  "cake": { url: "" },
  "camp": { url: "" },
  "cat": { url: "" },
  "chair": { url: "" },
  "classroom": { url: "" },
  "clown": { url: "" },
  "crayons": { url: "" },
  "cut": { url: "" },
  "desk": { url: "" },
  "egg": { url: "" },
  "elephant": { url: "" },
  "glue": { url: "" },
  "let's": { url: "" },
  "library": { url: "" },
  "mad": { url: "" },
  "paper": { url: "" },
  "pen": { url: "" },
  "pencil": { url: "" },
  "poster": { url: "" },
  "pupil": { url: "" },
  "read": { url: "" },
  "ruler": { url: "" },
  "school": { url: "" },
  "scissors": { url: "" },
  "small": { url: "" },
  "snake": { url: "" },
  "star": { url: "" },
  "surprised": { url: "" },
  "talk": { url: "" },
  "teacher": { url: "" },
  "television": { url: "" },
  "test": { url: "" },
  "woman": { utl: "" }
}]

window.addEventListener('load', () => {
  const d = document.getElementById('d')
  // for (const w of Object.keys(words)) {
  //   const toAdd = document.createElement('div')
  //   toAdd.style.marginBottom = "16px";
  //   toAdd.innerHTML = `<a target="_blank" rel="noopener noreferrer" href="https://www.google.com/search?q=image+${w}&sclient=img&source=hp&uact=5&tbm=isch">${w}</a>`
  //   d.appendChild(toAdd)
  // }

  render(theaters[Math.trunc(Math.random() * theaters.length)])
})

function shuffleStrings(strings) {
  const arr = strings.map(w => ({w, rand: self.crypto.randomUUID()}))
  arr.sort((lhs, rhs) => lhs.rand.localeCompare(rhs.rand))
  return arr.map(at => at.w)
}

function choose(theater) {
  return shuffleStrings(Object.keys(theater)).slice(0, 4)
}

function render(theater) {
  const mapping = {}
  const chosenWords = choose(theater)
  for (const at of chosenWords) {
    const img = document.createElement('img')
    img.id = `image-${at}`
    img.setAttribute('src', theater[at].url)
    img.setAttribute('width', "120")
    img.setAttribute('height', "120")
    img.style.padding = "5px"
    img.style.borderColor = "purple"
    img.style.borderStyle = "solid"
    img.style.borderRadius = "12px"
    img.style.marginLeft = "48px"
    img.setAttribute('draggable', 'true')
    img.addEventListener('dragstart', ev => {
      ev.dataTransfer.setData("text", ev.target.id);
    })
    document.getElementById('images').appendChild(img)
  }

  const shuffled = shuffleStrings(chosenWords)
  console.log(`chosenWords=${JSON.stringify(chosenWords)}, shuffeled=${JSON.stringify(shuffled)}`)
  for (const at of shuffled) {  
    const w = document.createElement('div')
    w.style.marginTop = '60px'
    w.style.marginBottom = '60px'

    const button = document.createElement('span')
    button.id = `button-${at}`
    button.style.display = 'inline-block'
    button.style.verticalAlign = "middle"
    button.style.lineHeight = '120px'
    button.innerText = 'ðŸ—£ï¸'
    button.style.borderColor = 'purple'
    button.style.borderStyle = 'solid'
    button.style.borderRadius = '6px'
    button.style.fontSize = '36'
    // button.style.maxWidth = '10%'
    button.addEventListener('click', () => {
      const utterance = new SpeechSynthesisUtterance(at)
      utterance.voice = voice
      utterance.rate = 0.8
      speechSynthesis.speak(utterance);
    })

    const landingZone = document.createElement('span')
    landingZone.id = `zone-${at}`
    landingZone.style.display = 'inline-block'
    landingZone.style.verticalAlign = "middle"
    landingZone.style.backgroundColor = '#FF5733'
    landingZone.style.lineHeight = '120px'
    landingZone.style.width = '120px'
    landingZone.style.height = '120px'
    landingZone.style.marginLeft = '48px'

    landingZone.addEventListener('dragover', ev => {
      ev.preventDefault()
    })
    landingZone.addEventListener('drop', ev => {
      let zoneId = landingZone.id
      ev.preventDefault()
      const dragee = ev.dataTransfer.getData('text')
      const curr = Object.entries(mapping).find(([im,z]) => z === zoneId)?.[0]
      if (curr) {
        document.getElementById('images').appendChild(document.getElementById(curr))
      }

      mapping[dragee] = zoneId
      landingZone.appendChild(document.getElementById(dragee))
      console.log(mapping)
    })


    w.appendChild(button)
    w.appendChild(landingZone)
    document.getElementById('buttons').appendChild(w)
  }

  document.getElementById('check').addEventListener('click', () => {
    const inUse = []
    for (const [im, z] of Object.entries(mapping)) {
      const w = z.split('-')[1]
      inUse.push(w)
      const buttonId = `button-${w}`
      const b = document.getElementById(buttonId)
      const ok = im === `image-${w}`
      b.style.borderColor = ok ? `#33FF57`: '#C70039'
    }

    for (const w of chosenWords) {
      if (inUse.includes(w)) {
        continue
      }

      const buttonId = `button-${w}`
      const b = document.getElementById(buttonId)
      b.style.borderColor = `purple`
    }
  })

  document.getElementById('next').addEventListener('click', () => {
    location.reload()
  })
}

</script>
<body dir="ltr">
  <center><h1 style="font-size:97px;">
    <h1 style="font-size:115px; margin: 2px;">
      <span class="s">?</span>
      <span class="t">?</span>
      <span class="u">?</span>
    </h1>
  </center>
  <div id="buttons"></div>
  <br/>
  <div id="images"></div>
  <ul style="font-size:36px; line-height: 1.5em;">
    <!-- <li>×ž×©×—×§ ×ž×¡×¤×¨ 1</li>
    <li>×ž×©×—×§ ×ž×¡×¤×¨ 2</li> -->
  </ul>
  <span id="check" class="button">Check</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span id="next" class="button">âŸ³</span>

  <div id="d"></div>
  <br/>
  <br/>
  <br/>
</body>

</html>